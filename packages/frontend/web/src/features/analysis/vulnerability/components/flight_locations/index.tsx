import { useField, useFormikContext } from "formik";
import { useTranslations } from "@/utils/translations";
import { TextField } from "@mui/material";
import React from "react";

export const GridVulnerabilityFlightLocationsForm = ({
  name,
}: {
  name: string;
}) => {
  const { setFieldValue, touched, submitCount } = useFormikContext<any>();
  const [{ value: config }, fieldMeta, { setValue: setConfig }] =
    useField(name);
  const errors = fieldMeta.error as any;
  const strings = useTranslations();
  return (
    <>
      <GridVulnerabilityFlightLocationsAverageForm name={name} />
    </>
  );
};

export const GridVulnerabilityFlightLocationsAverageForm = ({
  name,
}: {
  name: string;
}) => {
  const { setFieldValue, touched, submitCount } = useFormikContext<any>();
  const [{ value: config }, fieldMeta, { setValue: setConfig }] = useField<{
    type: "average";
    lightDayPercent?: number | string;
  }>(name);
  const errors = fieldMeta.error as any;
  const strings = useTranslations();
  return (
    // <CommonPaper>
    <TextField
      margin={"dense"}
      size={"small"}
      error={
        !!(
          (touched[`${name}.lightDayPercent`] || submitCount) &&
          errors?.lightDayPercent
        )
      }
      value={config?.lightDayPercent || null}
      onChange={({ target: { value } }) =>
        setConfig({
          type: "average",
          lightDayPercent: value,
        })
      }
      label={
        strings["grid-vulnerability.flight_locations.average.lightDayPercent"]
      }
    />
    // </CommonPaper>
  );
};
