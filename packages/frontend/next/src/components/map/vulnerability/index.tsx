import {
  MapPages,
  useMapContext,
  useMapPageProps,
  useMapSlugs,
} from "@/components/map/context";
import { MapPageAreaSelect } from "@/components/map/vulnerability/components/AreaSelect";
import { MapGridPage } from "@/components/map/vulnerability/components/GridPage";
import { MapDistrictPage } from "@/components/map/vulnerability/components/DistrictPage";
import React, { useMemo } from "react";
import { MapHabitatAreasSpeciesPage } from "@/components/map/habitat-areas/components/Item";
import {
  parseGeojson,
  useShowMapObjects,
} from "@rrrcn/frontend-helpers/src/geometry/map/useDrawGeojson";

export const MapVulnerabilityLeftPanel = () => {
  const { currentPage, selectedGridSlug } = useMapSlugs();
  const { map } = useMapContext();
  const { selectedGrid } = useMapPageProps();
  const mapObjects = useMemo(
    () => (selectedGrid && parseGeojson(selectedGrid.polygon)) || [],
    [selectedGrid]
  );
  useShowMapObjects(mapObjects, map, true, {
    fillOpacity: 0,
    zIndex: -10,
  });
  switch (currentPage) {
    case MapPages.GRID:
      return <MapGridPage />;
    case MapPages.DISTRICT:
      return <MapDistrictPage />;
    default:
      return <></>;
  }
};
