import {
  HABITAT_AREAS_SLUG,
  MapPages,
  useMapPageProps,
} from "@/components/map/context";
import React from "react";
import { Breadcrumbs } from "@mui/material";
import Link from "next/link";
import { routes } from "@/routes";
import { useTranslations } from "@/utils/translations";
import { useLang } from "@/utils/translations/context";

export const MapBreadcrumbs = () => {
  const translations = useTranslations();
  const {
    selectedSpeciesSlug,
    selectedDistrictSlug,
    selectedGridSlug,
    currentPage,
    selectedGrid,
    selectedDistrict,
    isHabitatAreas,
    selectedSpecies,
  } = useMapPageProps();
  const { lang } = useLang();
  return (
    <Breadcrumbs>
      <Link href={`${routes.MainPage}`}>
        {translations["common.breadcrumbs.main"]}
      </Link>
      {(() => {
        switch (currentPage) {
          case MapPages.GRID:
            return (
              <Link href={`${routes.MainPage}/${selectedGrid?.slug}`}>
                {selectedGrid?.localesMap[lang]?.title}
              </Link>
            );
          case MapPages.DISTRICT:
            return [
              <Link href={`${routes.MainPage}/${selectedGrid?.slug}`}>
                {selectedGrid?.localesMap[lang]?.title}
              </Link>,
              <Link href={`${routes.MainPage}/${selectedDistrictSlug}`}>
                {selectedDistrict?.localesMap[lang]?.name}
              </Link>,
            ];

          case MapPages.HABITAT_AREAS_SPECIES:
            return [
              <Link href={`${routes.MainPage}/${selectedGrid?.slug}`}>
                {selectedGrid?.localesMap[lang]?.title}
              </Link>,
              <Link
                href={`${routes.MainPage}/${HABITAT_AREAS_SLUG}/${selectedSpeciesSlug}`}
              >
                {translations["map.habitat-areas-title"]}:{" "}
                {selectedSpecies?.localesMap[lang]?.name}
              </Link>,
            ];
          case MapPages.SPECIES:
            return [
              <Link href={`${routes.MainPage}/${selectedGrid?.slug}`}>
                {selectedGrid?.localesMap[lang]?.title}
              </Link>,
              <Link href={`${routes.MainPage}/${selectedDistrictSlug}`}>
                {selectedDistrict?.localesMap[lang]?.name}
              </Link>,
              <Link
                href={`${routes.MainPage}/${HABITAT_AREAS_SLUG}/${selectedSpeciesSlug}`}
              >
                {selectedSpecies?.localesMap[lang]?.name}
              </Link>,
            ];
        }
      })()}
    </Breadcrumbs>
  );
};
