import { api } from "@/api";
import useSWRMutation from "swr/mutation";
import { BirdTrack } from "@rrrcn/common-types/strapi/models/BirdTrack";
import { PaginatedResult } from "@rrrcn/common-types/strapi/models/Pagination";
import { SensitiveArea } from "@rrrcn/common-types/strapi/models/SensitiveArea";

export const sensitiveAreasFetcher = ([key, id]: [string, string]): Promise<
  PaginatedResult<SensitiveArea>
> => {
  return api.sensitiveArea
    .getApiSensitiveAreas({
      params: {
        filters: { sensitive_area_source: id },
        pagination: { limit: 10000 },
      },
    })
    .then((it) => it.data);
};
export const useSensitiveArea = (source_id: number) => {
  return useSWRMutation(
    [`source_sensitive_areas`, String(source_id)],
    sensitiveAreasFetcher
  );
};
