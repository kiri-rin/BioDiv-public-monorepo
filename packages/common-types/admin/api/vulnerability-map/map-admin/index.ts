import {
  VulnerabilityMapMigrationShort,
  VulnerabilityMapSpatialGridDistrictCellShort,
  VulnerabilityMapSpatialGridDistrictShort,
  VulnerabilityMapSpatialGridShort,
  VulnerabilityMapVulnerabilityCalculation,
} from "@rrrcn/common-types/admin/api/vulnerability-map/entities/spatial-grid";
import { GeoJSON } from "geojson";
import { MapVulnereabilityCalculationConfig } from "@rrrcn/common-types/strapi/custom-models/MapVulnereabilityCalculation";
import { SEASONS } from "@rrrcn/common-types/services/api/migrations/generate-tracks/config";
import { AreaVulnerabilityControllerResponse } from "@rrrcn/common-types/services/api/vulnerability/overall/configs";
import { CommonVulnerabilityConfig } from "@rrrcn/common-types/common/vulnerability-config";

type IdType = number;

export namespace VulnerabilityMapAdminApiTypes {
  export namespace CreateSpatialGrid {
    export type Params = {};
    export type Body = {
      area: GeoJSON.Feature<GeoJSON.Polygon | GeoJSON.MultiPolygon>;
      cellSize: number;
      title: string;
      slug: string;
    };
    export type Response = VulnerabilityMapSpatialGridShort;
  }
  export namespace CreateSpatialGridDistrict {
    export type Params = {};
    export type Body = {
      gridId: IdType;
      area: GeoJSON.Feature<GeoJSON.Polygon | GeoJSON.MultiPolygon>;
      title: string;
      slug: string;
    };
    export type Response = VulnerabilityMapSpatialGridDistrictShort;
  }

  export namespace CreateImportConfig {
    export type Params = {};
    export type Body = {
      gridId: IdType;
      data: {
        cellId: IdType;
        vulnerability: AreaVulnerabilityControllerResponse;
        cellConfig: CommonVulnerabilityConfig;
      }[];
      speciesId: IdType;
    };
    export type Response = VulnerabilityMapSpatialGridDistrictCellShort[];
  }
  export namespace CreateHabitatArea {
    export type Params = {};
    export type Body = {
      gridId: IdType;
      area: GeoJSON.Feature<GeoJSON.Polygon | GeoJSON.MultiPolygon>;
      points: GeoJSON.FeatureCollection<GeoJSON.Point> | null;
      points_count: number | null;
      speciesId: IdType;
    };
    export type Response = VulnerabilityMapSpatialGridDistrictCellShort[];
  }
  export namespace CreateMigration {
    export type Params = {};
    export type Body = {
      gridId: IdType;
      season: SEASONS;
      migrationTracks: IdType[];
      speciesId: IdType;
      tracks_count: number;
    };
    export type Response = VulnerabilityMapMigrationShort;
  }

  export namespace CalculateHabitatAreaVulnerability {
    export type Params = {};
    export type Body = {
      gridId: IdType;
      habitatAreaId: IdType;
      config: MapVulnereabilityCalculationConfig;
    };
    export type Response = VulnerabilityMapVulnerabilityCalculation;
  }
  export namespace CalculateMigrationVulnerability {
    export type Params = {};
    export type Body = {
      gridId: IdType;
      migrationId: IdType;
      config: MapVulnereabilityCalculationConfig;
    };
    export type Response = VulnerabilityMapVulnerabilityCalculation;
  }
  export namespace CalculateImportVulnerability {
    export type Params = {};
    export type Body = {
      gridId: IdType;
      importConfigId: IdType;
    };
    export type Response = VulnerabilityMapVulnerabilityCalculation;
  }
  export namespace CalculateTracksVulnerabilityConfig {
    export type Params = {};
    export type Body = {
      migrationTracksId: IdType[];
      rotor: [number, number];
    };
    export type Response = VulnerabilityMapVulnerabilityCalculation;
  }
}
