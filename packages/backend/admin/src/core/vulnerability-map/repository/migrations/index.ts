import { IMapMigration } from "@rrrcn/admin/src/core/vulnerability-map/entities/migrations";
import { IMapMigrationTrack } from "@rrrcn/admin/src/core/vulnerability-map/entities/migration-track";
import { VulnerabilityMapAdminApiTypes } from "@rrrcn/common-types/admin/api/vulnerability-map/map-admin";
import { IMapSpatialGridCell } from "@rrrcn/admin/src/core/vulnerability-map/entities/spatial-grid";

export abstract class IMapMigrationsRepository<IdType> {
  public abstract getMigration(id: IdType): Promise<IMapMigration<IdType>>;
  public abstract createMigration(
    params: VulnerabilityMapAdminApiTypes.CreateMigration.Body
  ): Promise<IMapMigration<IdType>>;
  public abstract getMigrationsBySpatialGridCell(params: {
    cellId: IdType;
  }): Promise<IMapMigration<IdType>[]>;
  public abstract getMigrationsBySpatialGrid(params: {
    gridId: IdType;
  }): Promise<IMapMigration<IdType>[]>;
  public abstract getMigrationsTracksByMigration(params: {
    migrationId: IdType;
  }): Promise<IMapMigrationTrack<IdType>[]>;
  public abstract markMigrationIndexed(params: {
    migrationId: IdType;
    cells: IMapSpatialGridCell<IdType>[];
  }): Promise<void>;

  public abstract getMigrationsTracksBySpatialGrid(params: {
    gridId: IdType;
  }): Promise<IMapMigrationTrack<IdType>[]>;
  public abstract getMigrationsTrack(params: {
    trackId: IdType;
  }): Promise<IMapMigrationTrack<IdType>>;
  public abstract getMigrationsTracks(params: {
    trackIds: IdType[];
  }): Promise<IMapMigrationTrack<IdType>[]>;
}
